<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags always come first -->
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Using ZX Assembler on the TS1000 | Ben Hanna
</title>
  <link rel="canonical" href="https://benpaulhanna.com/using-zx-assembler-on-the-ts1000.html">

  <link rel="alternate" type="application/atom+xml" href="https://benpaulhanna.com/feeds/all.atom.xml" title="Full Atom Feed">
  <link rel="alternate" type="application/atom+xml" href="https://benpaulhanna.com/feeds/blog.atom.xml" title="Categories Atom Feed">


  <link rel="stylesheet" href="https://benpaulhanna.com/theme/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://benpaulhanna.com/theme/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://benpaulhanna.com/theme/css/pygments/default.min.css">
  <link rel="stylesheet" href="https://benpaulhanna.com/theme/css/style.css">


<meta name="description" content="Introduction It was a thrilling experience for me as a young boy to learn how to program using BASIC on an Apple IIe in the mid 90s. I remember spending hours sitting in front of the computer, staring at the green text on the black screen and typing in lines …">
<script>
  (function(i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function() {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o);
    a.async = 1;
    a.src = g;
    m = s.getElementsByTagName(o)[0];
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
  ga('create', 'UA-25795278-5', 'auto');
  ga('send', 'pageview');
</script>
</head>

<body>
  <header class="header">
    <div class="container">
      <div class="row">
        <div class="col-sm-4">
          <a href="https://benpaulhanna.com/">
            <img class="img-fluid" src=https://benpaulhanna.com/images/header.jpg alt="Ben Hanna">
          </a>
        </div>
        <div class="col-sm-8">
          <h1 class="title"><a href="https://benpaulhanna.com/">Ben Hanna</a></h1>
          <p class="text-muted">Software Craftsman and Game Programming Enthusiast</p>
          <ul class="list-inline">
            <li class="list-inline-item"><a href="/category/blog.html">blog</a></li>
            <li class="list-inline-item"><a href="https://my.indeed.com/p/benh-h32eywo">résumé</a></li>
            <li class="list-inline-item text-muted">|</li>
            <li class="list-inline-item"><a href="https://benpaulhanna.com/pages/about.html">About</a></li>
            <li class=" list-inline-item text-muted">|</li>
            <li class="list-inline-item"><a class="fa fa-github" href="https://github.com/benthepoet" target="_blank"></a></li>
            <li class="list-inline-item"><a class="fa fa-stack-overflow" href="https://stackoverflow.com/users/8171618/ben-hanna" target="_blank"></a></li>
            <li class="list-inline-item"><a class="fa fa-linkedin" href="https://www.linkedin.com/in/ben-hanna-0a275135" target="_blank"></a></li>
          </ul>
        </div>
      </div>
    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>Using ZX Assembler on the TS1000
</h1>
      <hr>
<article class="article">
  <header>
    <ul class="list-inline">
      <li class="list-inline-item text-muted" title="2022-12-11T13:04:00-05:00">
        <i class="fa fa-clock-o"></i>
        Sun 11 December 2022
      </li>
      <li class="list-inline-item">
        <i class="fa fa-folder-open-o"></i>
        <a href="https://benpaulhanna.com/category/blog.html">Blog</a>
      </li>
    </ul>
  </header>
  <div class="content">
    <h1>Introduction</h1>
<p>It was a thrilling experience for me as a young boy to learn how to program using BASIC on an Apple IIe in the mid 90s. I remember spending hours sitting in front of the computer, staring at the green text on the black screen and typing in lines of code. I was always amazed by how I could create simple programs that would allow me to do things like play games, solve math problems, or even create graphics and animations.</p>
<p>I've always had an affinity for such simple 8-bit computers and more recently I begin exploring and experimenting with the ZX81/TS1000. The TS1000 is an interesting machine to program for. As per the period it has it's own BASIC implementation which is quite capable but slower than most due to the system's cost-reduced design. Thus, to write software for the system that's performant as possible it's necessary use assembly language or machine code.</p>
<p>There's plenty of examples out there of how to assemble a program for the TS1000 using modern tools like VS Code and TASM, but I want a more authentic experience where I'm actually writing assembly and assembling on the system itself. There's a few assemblers that were created for the TS1000 back in the day, but the one I'm going to focus on is ZX Assembler by Artic Computing.</p>
<h1>The Assembler</h1>
<p>ZX Assembler is a fairly robust assembler for the TS1000 and has basic text navigation features, support for labels, and a monitor for inspecting memory as well as registers/flags. This assembler is loaded from cassette and occupies around 7K or memory, which is fairly significant amount of memory if you have the standard 16K RAM expansion.</p>
<p>Playing around with this version I noticed you'll occasionally get instances where the assembler will crash or memory gets into a bad state.</p>
<p>Eventually I happened to find out that a gentleman named Carlo Delhez had later revised this assembler and released it as ZX Assembler 2. Fixed in this version are many of the crashing issues and there are also some syntax updates. After playing around with this version for a fair bit of time I can say it's very robust and a pleasant experience to work with. This version can be found <a href="https://web.archive.org/web/20120112020721if_/http://www.delhez.demon.nl/ZXA2V38.ZIP">here</a>.</p>
<p>Even better, with ZX Assembler 2 you are no longer restricted to loading it in via cassette and eating up space in your precious 16K - 32K area. Included with the assembler are versions that can be burned to an EPROM (or EEPROM) and mapped to the 8K - 16K area which by default is just a shadow of the BASIC ROM. This does still require lowering the RAMTOP for space that it needs for variables though. There's also a version that assumes the 8K - 16K is RAM and thus negates the need for lowering the RAMTOP.</p>
<p>You can try this out using the EightyOne emulator. Adjust your hardware settings as follows.</p>
<ul>
<li>Set the RAM Pack to 16K</li>
<li>Enable RAM in 8K - 16K</li>
</ul>
<p><img src="/images/using-zx-assembler-on-the-ts1000-00.png" alt="EightyOne Hardware Settings"/></p>
<p>Once that's set, go to <code>File</code> and select <code>Load Memory Block</code>. Select the <code>ZXA2-8K.C</code> and load it at address 8192.</p>
<p>After that type the following the command and you should be presented with the assembler screen.</p>
<div class="highlight"><pre><span></span><code>RAND USR 8192
</code></pre></div>

<h1>Basic Instructions</h1>
<p>Most of what's written in the manual for the original ZX Assembler still applies but I'll quickly provide a crash course here. The manual is available <a href="https://archive.org/details/international-publishing-software/mode/2up">here</a>.</p>
<h3>Main Prompt</h3>
<ul>
<li><code>A</code> - Assemble the current source</li>
<li><code>E</code> - Open the editor</li>
<li><code>I</code> - Display registers/flags</li>
<li><code>M</code> - Open the machine code monitor</li>
</ul>
<p>The <code>Q</code> key backs out of commands. Pressing it twice at the main screen will exit back to BASIC.</p>
<h3>Editor</h3>
<ul>
<li><code>Shift + 6</code> - Cursor down</li>
<li><code>Shift + 7</code> - Cursor up</li>
<li><code>Shift + 8</code> - Cursor right</li>
<li><code>Shift + 5</code> - Cursor left</li>
<li><code>Shift + 0</code> - Backspace</li>
<li><code>Shift + 9</code> - Insert a character</li>
<li><code>Shift + A</code> - Enter a label</li>
<li><code>Shift + D</code> - Delete line</li>
<li><code>Shift + E</code> - Insert line</li>
<li><code>Shift + Q</code> - Quit search, line, or editor</li>
<li><code>Shift + T</code> - Move to top of source</li>
<li><code>Shift + S</code> - Search forward for text, <code>Shift + A</code> will search for a label</li>
</ul>
<h3>Monitor</h3>
<ul>
<li><code>O</code> - Cursor up</li>
<li><code>L</code> - Cursor down</li>
</ul>
<h1>ZX Assembler 2 Differences</h1>
<h3>Directives</h3>
<p>The original assembler allows for implicit strings and bytes to be entered. Version 2 requires you to explicitly denote these using <code>DB</code> and <code>DW</code>. Directives <code>DM</code> (defining a byte string) and <code>DS</code> (reserving <em>n</em> bytes of space) have also been added. </p>
<p>The labels in this example are arbitrary.</p>
<div class="highlight"><pre><span></span><code><span class="p">;</span><span class="w"> </span><span class="n">Define</span><span class="w"> </span><span class="n">bytes</span><span class="w"></span>
<span class="n">NUMS</span><span class="w">   </span><span class="n">DB</span><span class="w"> </span><span class="mi">0</span><span class="n">A</span><span class="p">,</span><span class="mi">1</span><span class="n">F</span><span class="p">,</span><span class="n">FF</span><span class="w"></span>

<span class="p">;</span><span class="w"> </span><span class="n">Define</span><span class="w"> </span><span class="n">words</span><span class="w"></span>
<span class="n">ADDRS</span><span class="w">  </span><span class="n">DW</span><span class="w"> </span><span class="mi">0010</span><span class="p">,</span><span class="mi">80</span><span class="n">CA</span><span class="w"></span>

<span class="p">;</span><span class="w"> </span><span class="n">Define</span><span class="w"> </span><span class="n">byte</span><span class="w"> </span><span class="n">string</span><span class="w"></span>
<span class="n">TEXT</span><span class="w">   </span><span class="n">DM</span><span class="w"> </span><span class="s2">&quot;HELLO&quot;</span><span class="w"></span>

<span class="p">;</span><span class="w"> </span><span class="n">Allocate</span><span class="w"> </span><span class="n">space</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">variable</span><span class="w"></span>
<span class="n">HP</span><span class="w">     </span><span class="n">DS</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
</code></pre></div>

<h3>Constants</h3>
<p>Constants are assigned in the format <code>NAME=VALUE</code>. There must not be any spaces around the <code>=</code> sign.</p>
<div class="highlight"><pre><span></span><code>LASTK=4025
</code></pre></div>

<h1>Hello World</h1>
<p>This example program will print the text <code>Hello World</code> at the top left corner of the screen.</p>
<div class="highlight"><pre><span></span><code>; Constant
DFILE=400C

       JR START

; Defining data
TEXT   DB 11
       DM &quot;HELLO WORLD&quot;

; Label
START  LD DE,(DFILE)
       INC DE
       LD BC,(TEXT)
       LD B,0
       LD HL,TEXT+1
       LDIR
</code></pre></div>
  </div>
</article>
<hr>
<div id="disqus_thread"></div>
<script>
  var disqus_config = function() {
    this.page.url = 'https://benpaulhanna.com/using-zx-assembler-on-the-ts1000.html';
    this.page.identifier = 'using-zx-assembler-on-the-ts1000';
  };
  (function() {
    var d = document;
    var s = d.createElement('script');
    s.src = '//benpaulhanna.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript class="text-muted">
  Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="row">
       <ul class="col-sm-6 list-inline">
          <li class="list-inline-item"><a href="https://benpaulhanna.com/archives.html">Archives</a></li>
          <li class="list-inline-item"><a href="https://benpaulhanna.com/categories.html">Categories</a></li>
          <li class="list-inline-item"><a href="https://benpaulhanna.com/tags.html">Tags</a></li>
        </ul>
        <p class="col-sm-6 text-sm-right text-muted">
          Generated by <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a> / <a href="https://github.com/nairobilug/pelican-alchemy" target="_blank">&#x2728;</a>
        </p>
      </div>
    </div>
  </footer>
</body>

</html>